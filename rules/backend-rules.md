Basic principles of development

## 1. Стиль.

1. Необходимо соблюдение основных стандартов кодирования PSR-*(PSR-1, PSR-2, PSR-4, PSR-5)
2. Классы, интерфейсы, методы и просто функции - все подробно комментируется (в соответствии с PSR-5)
3. Ключевые моменты кода обязательно комментируются.
4. В PHP коде запрещены вставки HTML, JavaScript, CSS. Все вставки должны производиться через специальные шаблоны.
5. Классы, функции, переменные и константы должны логически именоваться человекопонятным способом на английском языке в соответствии со стандартами кодирования. Для грамотного написания при необходимости используем переводчики (Google Translate, Yandex Translate& etc.). Не допускается именование транслитом на русском, либо на иных языках
6. Отступ 4 пробела, клавишу tab настроить именно так.
7. Кавычки (в PHP). Строки заключаются в двойные кавычки только если используется встраивание переменных и спецсимволов. (Например: " Hello, $name";). Во всех остальных случаях необходимо использовать одинарные кавычки для того, чтобы компилятор лишний раз не проверял строку на подстановки.
8. В PHP для наименования локальных переменных использовать snake_case. Для имен классов -  UpperCamelCase. Наименования методов, переменных экземпляров классов lowerCamelCase, константы — UPPER_SNAKE_CASE, параметры запросов - snake_case.
9. Массивы - квадратными скобками, так лаконичнее.

Пример:
```php
define('MY_USEFUL_CONSTANT','value');
class MyBestClassEver{
    private function myPrivateFunction($arguments)
    {
        $variables_array = [
            'alpha' => $arguments['alpha'],
            'gamma' => ['gamma', 3,14],
            'string'=> ['string']
        ];
        return StaticClass::staticFunction($variables_array);
    }
}
  
$myBestClassEver = new MyBestClassEver();
```

## 2. Безопасность
1. Каждый аргумент метода простого типа должен проверяться на тип. Если что-то не так - возвращается ошибка или выбрасывается исключение.
2. Исключения и сообщения об ошибках должны быть человеко-понятны, всякие "Что-то пошло не так" можно отдавать пользователю, но в лог должно попасть исключение со стектрейсом/местом возникновения ошибки и понятным описанием.
3. eval() не используется.
4. Если метод возвращает не только bool, то стремиться проверить с ===, или !==.
5. Не использовать никакие глобальные переменные за исключением классов приложений и подобных контейнеров. При крайней необходимости использования максимально комментируется.
6. Область видимости переменных и методов классов всегда должна быть определена (private, protected, public).

## 3. MVC
1. Никаких запросов к БД из шаблонов
2. Никакой верстки (html/js/css) в контроллерах
3. Никакой магии, приватные поля + геттеры с сеттерами (при необходимости)
4. Никаких обработок пользовательского ввода в моделях
5. Тонкий контроллер, обработка параметров запроса + RBAC и вызовы моделей.

## 4. GIT
1. Не стоит слишком доверяться GUI клиентам.
2. Мастер недоступен для коммитов, только для пул-реквестов. 
В мастер изменения приходят с двух веток - hotfix и prereliase
3. Изменения коммитить в фичурных ветках. После добавления фичи в prereliase, фичурная ветка удаляется.
4. Срочные правки коммитить в hotfix.
5. Даже в экстренных ситуациях сообщения коммитов должны быть понятны.

## 5. API 
- [Авторизация](../api/api-rules/auth.md)
- [Запросы API](../api/api-rules/request.md)
- [Ответы API](../api/api-rules/response.md)

## 6. Нейминг
Для снижения неопределенности требуется подобное называть подобным, при написании наименований полей соблюдать правила.
- name - не должно существовать такого поля, могут существовать first_name, surname, middle_name, patronomic, short_name, full_name, username
- title - всегда полный заголовок. Краткий - short_title, если требуется.
- text - всегда полный текст. Краткий - short_text, если требуется.
- description - всегда полное описание. Краткое - short_description, если требуется.
- created_at и updated_at - обязательны для сущностей
- если вводятся "поля-логи", нейминг - действие_at (created_at, activited_at) - когда сделал, действие_by (created_by, activited_by) - кто сделал.
- status - поле состояния в бизнес-процессе у записей в БД, без active/open/deleted и прочих. Значения статусов - числовые константы в моделях.
- type - поле типа/вида/разновидности, без булевых определений (например, multi_change/single_change/text), значения - числовые константы в моделях.
- file - это файл
- link - это ссылка
- справочные значения - объекты, содержащие id и value

## 7. Прочее
1. Избегаем глобальных функций, волшебных чисел, универсальных классов
2. Соблюдаем баланс между хардкодом и софткодом.
3. Следование принципам DRY, YAGNI , SOLID, TDD
4. Обработка/проверка входящих параметров. Обработка результатов вызовов функций. Никаких вложенных вызовов. Обработка ошибок, состояний, исключений.
5. Вне задач рефакторинга, не относящийся к Вашей текущей задаче код не трогать
